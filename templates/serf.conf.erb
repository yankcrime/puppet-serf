<%-
require 'json'

config_file= {}
config_file['node_name'] = @node_name if @node_name
config_file['protocol'] = @protocol.to_i if @protocol
config_file['advertise'] = @advertise if @advertise
config_file['bind'] = @bind if @bind
config_file['encrypt_key'] = @encrypt_key if @encrypt_key
config_file['event_handlers'] = @event_handlers unless @event_handlers.empty?
config_file['tags'] = @tags unless @tags.empty?
config_file['start_join'] = @start_join unless @start_join.empty?
config_file['profile'] = @profile unless @profile.to_s.empty?
config_file['discover'] = @discover unless @discover.empty?
config_file['rpc_addr'] = "#{@rpc_address}:#{@rpc_port}" unless @rpc_address.to_s.empty?
config_file['rpc_auth'] = @rpc_auth unless @rpc_auth.to_s.empty?
config_file['log_level'] = @log_level if @log_level
config_file['enable_syslog'] = true
-%>
<%=JSON.pretty_generate(config_file)%>
